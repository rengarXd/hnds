<!doctype html>
<html>

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
		<meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
		<title>房产信息body</title>
		<link href="../../../css/Hui.css" rel="stylesheet" type="text/css" />
		<style type="text/css">
			.H_header_bg {
				background: #09a4de
			}
		</style>
	</head>

	<body>
		<div class="H-padding-vertical-bottom-10"></div>
		<div class="H-channel-title H-flexbox-horizontal H-theme-background-color-white H-vertical-middle H-border-vertical-bottom-after">
			<div class="H-channel-line H-theme-background-color-black H-padding-vertical-top-15 H-padding-horizontal-left-3  H-margin-horizontal-left-10"></div>
			<div class="H-channel-text H-theme-font-color-black H-flex-item H-font-size-18 H-theme-font-color-black H-padding-10 H-margin-horizontal-right-10 H-text-show-row-1">
				房产信息
			</div>
		</div>
		<form id="forms">
			<div class="H-border-vertical-both-after">
				<div class="H-text-list H-flexbox-horizontal  H-theme-background-color-white H-border-vertical-bottom-margin-left-10-after H-vertical-middle H-touch-active" tapmode onclick="select('house_type', '003');">
					<div class="H-flex-item H-padding-horizontal-left-10 H-padding-horizontal-right-15 H-font-size-14 H-padding-vertical-both-12">
						房屋类别: <span class="H-padding-horizontal-both-12" id="house_type">点击选择房屋类别</span>
					</div>
					<span class="H-icon H-padding-horizontal-right-5 H-display-block"> <i class="H-iconfont H-icon-arrow-right H-theme-font-color-ccc H-font-size-14 H-vertical-middle"></i> </span>
				</div>
				<div class="H-text-list H-flexbox-horizontal  H-theme-background-color-white H-border-vertical-bottom-margin-left-10-after H-vertical-middle H-touch-active" tapmode onclick="select('building_toward', '005');">
					<div class="H-flex-item H-padding-horizontal-left-10 H-padding-horizontal-right-15 H-font-size-14 H-padding-vertical-both-12">
						建筑朝向: <span class="H-padding-horizontal-both-12" id="building_toward">点击选择房屋类别</span>
					</div>
					<span class="H-icon H-padding-horizontal-right-5 H-display-block"> <i class="H-iconfont H-icon-arrow-right H-theme-font-color-ccc H-font-size-14 H-vertical-middle"></i> </span>
				</div>
				<div class="H-text-list H-flexbox-horizontal  H-theme-background-color-white H-border-vertical-bottom-margin-left-10-after H-vertical-middle H-touch-active" tapmode onclick="select('building_structure', '006');">
					<div class="H-flex-item H-padding-horizontal-left-10 H-padding-horizontal-right-15 H-font-size-14 H-padding-vertical-both-12">
						建筑结构: <span class="H-padding-horizontal-both-12" id="building_structure">点击选择房屋类别</span>
					</div>
					<span class="H-icon H-padding-horizontal-right-5 H-display-block"> <i class="H-iconfont H-icon-arrow-right H-theme-font-color-ccc H-font-size-14 H-vertical-middle"></i> </span>
				</div>
				<div class="H-text-list H-flexbox-horizontal  H-theme-background-color-white H-border-vertical-bottom-margin-left-10-after H-vertical-middle H-touch-active" tapmode onclick="select('dywz', '007');">
					<div class="H-flex-item H-padding-horizontal-left-10 H-padding-horizontal-right-15 H-font-size-14 H-padding-vertical-both-12">
						单元位置: <span class="H-padding-horizontal-both-12" id="dywz">点击选择房屋类别</span>
					</div>
					<span class="H-icon H-padding-horizontal-right-5 H-display-block"> <i class="H-iconfont H-icon-arrow-right H-theme-font-color-ccc H-font-size-14 H-vertical-middle"></i> </span>
				</div>
				<div class="H-text-list H-flexbox-horizontal  H-theme-background-color-white H-border-vertical-bottom-margin-left-10-after H-vertical-middle H-touch-active" tapmode onclick="select('fqwz', '008');">
					<div class="H-flex-item H-padding-horizontal-left-10 H-padding-horizontal-right-15 H-font-size-14 H-padding-vertical-both-12">
						分区位置: <span class="H-padding-horizontal-both-12" id="fqwz">点击选择房屋类别</span>
					</div>
					<span class="H-icon H-padding-horizontal-right-5 H-display-block"> <i class="H-iconfont H-icon-arrow-right H-theme-font-color-ccc H-font-size-14 H-vertical-middle"></i> </span>
				</div>
				<div class="H-text-list H-flexbox-horizontal  H-theme-background-color-white H-border-vertical-bottom-margin-left-10-after H-vertical-middle H-touch-active" tapmode onclick="select('fslx', '009');">
					<div class="H-flex-item H-padding-horizontal-left-10 H-padding-horizontal-right-15 H-font-size-14 H-padding-vertical-both-12">
						复式类型: <span class="H-padding-horizontal-both-12" id="fslx">点击选择房屋类别</span>
					</div>
					<span class="H-icon H-padding-horizontal-right-5 H-display-block"> <i class="H-iconfont H-icon-arrow-right H-theme-font-color-ccc H-font-size-14 H-vertical-middle"></i> </span>
				</div>
				<!--#############################################-->
				<div class="H-flexbox-horizontal H-border-vertical-bottom-margin-left-10-after">
					<span class="H-vertical-middle H-padding-horizontal-left-10 H-theme-background-color-white H-font-size-14">所在楼层：</span>
					<input type="text" name="house_floor" class="H-textbox H-vertical-align-middle H-vertical-middle H-font-size-14 H-flex-item H-box-sizing-border-box H-border-none H-outline-none H-padding-12" data-rule="n1-3" data-nullmsg="所在楼层不能为空" data-errmsg="所在楼层填写有误"
						placeholder="填写所在楼层" />
				</div>
				<div class="H-flexbox-horizontal H-border-vertical-bottom-margin-left-10-after">
					<span class="H-vertical-middle H-padding-horizontal-left-10 H-theme-background-color-white H-font-size-14">总楼层：</span>
					<input type="text" name="total_floor" class="H-textbox H-vertical-align-middle H-vertical-middle H-font-size-14 H-flex-item H-box-sizing-border-box H-border-none H-outline-none H-padding-12" data-rule="n1-3" data-nullmsg="总楼层不能为空" data-errmsg="总楼总楼层"
						placeholder="填写总楼层" />
				</div>
				<div class="H-flexbox-horizontal H-border-vertical-bottom-margin-left-10-after">
					<span class="H-vertical-middle H-padding-horizontal-left-10 H-theme-background-color-white H-font-size-14">建筑面积：</span>
					<input type="text" name="building_area" class="H-textbox H-vertical-align-middle H-vertical-middle H-font-size-14 H-flex-item H-box-sizing-border-box H-border-none H-outline-none H-padding-12" data-rule="n1-5" data-nullmsg="建筑面积不能为空" data-errmsg="建筑面积填写有误"
						placeholder="填写建筑面积" />
				</div>
				<div class="H-flexbox-horizontal H-border-vertical-bottom-margin-left-10-after">
					<span class="H-vertical-middle H-padding-horizontal-left-10 H-theme-background-color-white H-font-size-14">建筑年份：</span>
					<input type="text" name="build_year" class="H-textbox H-vertical-align-middle H-vertical-middle H-font-size-14 H-flex-item H-box-sizing-border-box H-border-none H-outline-none H-padding-12" data-rule="n-4" data-nullmsg="建筑年份不能为空" data-errmsg="建筑年份填写有误"
						placeholder="填写建筑年份" />
				</div>
			</div>
		</form>
		<footer class="H-footer H-padding-10 ">
			<button id="btn" class="H-margin-vertical-top-10 H-position-static H-button H-width-100-percent  H-font-size-15 H-outline-none H-padding-vertical-both-12 H-padding-horizontal-both-20 H-theme-background-color1 H-theme-font-color-white H-theme-border-color1 H-theme-background-color1-click H-theme-font-color1-click ">
				下一步(5/21)
			</button>
		</footer>
		<script src="../../../script/H.js" type="text/javascript"></script>
		<script src="../../../script/zepto.min.js" type="text/javascript"></script>
		<script src="../../../script/tools/availdate-v1.0.2.js" type="text/javascript"></script>
		<script type="text/javascript">
			var house_type = null;
			H.ready(function() {
				api.parseTapmode();
				H.getPrefs(function(ret, err) {
					if (ret && ret.value) {
						assessinfo = eval('(' + ret.value + ')');
						console.log(JSON.stringify(assessinfo));
						$("button").text('下一步(3/4)');
					} else {}
				}, 'rooms');
				ac.form({
					area: "#forms",
					btn: "#btn", // 触发验证的按钮或者元素，支持标签，id，class，推荐使用id或者class
					singleError: function(e, msg) {
						// 自定义弹窗格式###############
						alert(msg);
					},
					endSuccess: function(data) {
						var value = {
							"house_type": $('#house_type').attr('infoid003'),
							"building_toward": $('#building_toward').attr('infoid005'),
							"building_structure": $('#building_structure').attr('infoid006'),
							"building_structure": $('#building_structure').attr('infoid006'),
						};
						datas = data;
//						var idAray = new Array();
//						for (var i = 0; i < $('.H-padding-horizontal-both-12').size(); i++) {
//							$('.H-padding-horizontal-both-12').each(function(i) {
//								idAray.push($(this).attr('id'));
//							});
//						}

						alert(idAray);
						//						datas.house_type = house_type;
						$.extend(datas, value);
						//						post_data();
						//												alert(JSON.stringify(datas));
					}
				});
			});
			//类别选择器
			function select(IdName, nums) {
				var infoid = 'infoid' + nums;
				var infonm = 'infonm' + nums;
				H.selAjax(function(ret, selet_option) {
					$('#' + IdName).attr("infoid", "");
					//					alert("ret.buttonIndex==="+ret.buttonIndex+"selet_option.length==="+selet_option.length);
					if (ret.buttonIndex <= selet_option.length) {
						//							alert(ret.buttonIndex);
						$('#' + IdName).attr("infoid", selet_option[ret.buttonIndex - 1][infoid]).html(selet_option[ret.buttonIndex - 1][infonm]);
					}
				}, nums);
			}

			//			function select() {
			//				H.actionSheet(function(ret, err) {
			//					house_type = ret.buttonIndex;
			//					var msgAry = ['身份证', '纳税人识别号', '组织机构代码'];
			//					switch (house_type) {
			//						case 1:
			//							$("#house_type").html(msgAry[0]);
			//							break;
			//						case 2:
			//							$("#house_type").html(msgAry[1]);
			//							break;
			//						case 3:
			//							$("#house_type").html(msgAry[2]);
			//							break;
			//					}
			//					console.log(JSON.stringify(ret));
			//				}, '请选择房屋类别', ['身份证', '纳税人识别号', '组织机构代码']);
			//			}
			//返回结果处理
			function results(ret, callback) {
				api.hideProgress();
				if (ret.success) {
					result = ret;
					if (typeof callback == "function") {
						callback();
					}
					api.execScript({
						name: 'rooms_header',
						script: 'fileInfo();'
					});
				} else {
					H.toast(ret.message);
				}
			}

			function _ajax() {
				//1.4、已经登录
				//更新存量房信息
				$('#house_type').attr('infoid003') ? H.ajax(function(ret, err) {
					results(ret);
				}, 'appHouseAssessUpdate&funid=houses_assessinfo&user_id=' + userinfo[0].user_id + '&uuid=' + userinfo[0].uuid + '&assessinfo_id=' + assessinfo.data.assessinfo_id, 'post', {
					values: datas
				}) : H.toast('您还有未选择的选项');
				//				if (type_option && paytype && dates) {
				////					console.log(JSON.stringify(datas));
				//					H.ajax(function(ret, err) {
				//						H.toast(ret.message);
				//						results(ret);
				//					}, 'appHouseAssessUpdate&funid=houses_assessinfo&user_id=' + userinfo[0].user_id + '&uuid=' + userinfo[0].uuid + '&assessinfo_id=' + assessinfo.data.assessinfo_id, 'post', {
				//						values : datas
				//					});
				//				} else {
				//					H.toast('您还有未选择的选项');
				//				}
			}

			function post_data() {
				H.getUserPref(function() {
					_ajax();
				});
			}
		</script>
	</body>

</html>